# 4.3. Рекурсия. Декораторы. Генераторы

A. Рекурсивный сумматор
```
def recursive_sum(*args):
    if len(args) == 0:
        return 0
    return recursive_sum(*args[:-1]) + args[-1]
```
B. Рекурсивный сумматор цифр
```
def recursive_digit_sum(n: int) -> int:
    if n < 10:
        return n
    return recursive_digit_sum(n // 10) + n % 10
```
C. Многочлен N-ой степени
```
def make_equation(*args):
    if len(args) == 1:
        return str(args[0])

    operator = " - " if args[-1] < 0 else " + "
    value = str(args[-1]) if args[-1] >= 0 else str(-args[-1])

    return f'({make_equation(*args[:-1])}) * x{operator}{value}'
```
D. Декор результата
```
def answer(func):

    def new_func(*args, **kwargs):
        return f'Результат функции: {func(*args, **kwargs)}'
    return new_func
```
E. Накопление результата
```
def result_accumulator(func):
    ans = []

    def wrap(*args, method="accumulate"):
        ans.append(func(*args))
        if method == "drop":
            lst = ans.copy()
            ans.clear()
            return lst
    return wrap
```
F. Сортировка слиянием
```
def merge_sort(arr):
    if len(arr) <= 1:
        return arr

    mid = len(arr) // 2
    left_part = merge_sort(arr[:mid])
    right_part = merge_sort(arr[mid:])

    return merge(left_part, right_part)


def merge(left, right):
    merged = []
    i = j = 0

    while i < len(left) and j < len(right):
        if left[i] <= right[j]:
            merged.append(left[i])
            i += 1
        else:
            merged.append(right[j])
            j += 1

    if i < len(left):
        merged += left[i:]
    if j < len(right):
        merged += right[j:]

    return merged
```
G. Однотипность не порок
```
def same_type(func):
    def wrapper(*args):
        if len(set(type(i) for i in args)) != 1:
            print("Обнаружены различные типы данных")
            return False
        return func(*args)

    return wrapper
```
H. Генератор Фибоначчи
```
def fibonacci(n):
    n1, n2 = 0, 1
    for i in range(n):
        yield n1
        n1, n2 = n2, n1 + n2
```
I. Циклический генератор
```
def cycle(lst):
    while len(lst) > 0:
        for i in lst:
            yield i
```
J. "Выпрямление" списка
```
def make_linear(lst):
    ans = []
    for i in lst:
        if isinstance(i, list):
            ans.extend(make_linear(i))
        else:
            ans.append(i)
    return ans
```